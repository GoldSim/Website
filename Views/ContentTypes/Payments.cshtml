@{
  Layout = null; // "~/Views/Layout/_Layout.cshtml";
}

<!DOCTYPE html>
<html xmlns="https://www.w3.org/1999/xhtml" lang="en" class="no-js">
  <head runat="server">
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, height=device-height, initial-scale=1.0, minimum-scale=1.0, maximum-scale=1.0, user-scalable=no" />
    <title>@Model.Title - GoldSim</title>
    <meta name="keywords" content="simulation software, business simulation software, decision analysis software, discrete event, Monte Carlo, Monte Carlo simulation, modeling, modelling, decision analysis, process modeling, process simulation software, simulation technology, supply chain software, uncertainty analysis, stochastic, uncertainty, probabilistic" />
    <meta name="description" content="GoldSim is a powerful and flexible platform for visualizing and dynamically simulating nearly any kind of physical, financial or organizational system. This page summarizes the available GoldSim software products." />
    <meta name="google-site-verification" content="EX0ea3_txOh2GJkZZs_sVxxpIg_Yk7RHYB_xOzCv4Qo" />
    <meta name="msvalidate.01" content="502A7C1A613414AC1FCABAA10A8B17AA" />
    <link rel="canonical" href="https://www.goldsim.com<%= Request.Url.AbsolutePath.ToString().ToLower() %>" />
    <link rel="apple-touch-icon" sizes="180x180" href="/Images/Favicons/apple-touch-icon.png" />
    <link rel="icon" type="image/png" sizes="32x32" href="/Images/Favicons/favicon-32x32.png" />
    <link rel="icon" type="image/png" sizes="16x16" href="/Images/Favicons/favicon-16x16.png" />
    <link rel="manifest" href="/Images/Favicons/manifest.json" />
    <link rel="mask-icon" href="/Images/Favicons/safari-pinned-tab.svg" color="#000000" />
    <link rel="shortcut icon" href="/Images/Favicons/favicon.ico" />
    <meta name="msapplication-config" content="/Images/Favicons/browserconfig.xml" />
    <meta name="theme-color" content="#ffffff" />
    <link rel="stylesheet" type="text/css" href="/Shared/Styles/Vendor/FontAwesome/font-awesome.min.css" />
    <link rel="stylesheet" type="text/css" href="/Shared/Styles/Style.min.css" />
    <link rel="stylesheet" type="text/css" href="/Shared/Styles/Vendor/RedCastor/awesome-foundation6-checkbox.css" />
    <style type="text/css">
      header.site.header {
        -webkit-box-shadow: 0 0 9px 2px rgba(0, 0, 0, 0.07);
        box-shadow: 0 0 9px 2px rgba(0, 0, 0, 0.07);
      }
    </style>
    <script>
      /**
       * Initialize Google Analytics
       */
      (function (i, s, o, g, r, a, m) {
      i['GoogleAnalyticsObject'] = r; i[r] = i[r] || function () {
        (i[r].q = i[r].q || []).push(arguments)
      }, i[r].l = 1 * new Date(); a = s.createElement(o),
        m = s.getElementsByTagName(o)[0]; a.async = 1; a.src = g; m.parentNode.insertBefore(a, m)
      })(window, document, 'script', 'https://www.google-analytics.com/analytics.js', 'ga');
      ga('create', 'UA-2082450-1', 'auto');
      ga('send', 'pageview');
    </script>
  </head>
  <body itemscope itemtype="https://schema.org/WebPage">
    @Html.Partial("_CookiesNotice")

    <!-- Site Header Area -->
    <header id="SiteHeader" class="site header title-bar" role="banner" vocab="http://schema.org" typeof="WPHeader">
      <div class="title-bar-left menu">
        <button class="menu-icon hide-for-large" type="button" data-open="PrimaryNavigationSmallScreen"></button>
      </div>
      <!-- Logo -->
      <div class="title-bar-middle logo centered">
        <a href="/"><img src="/Images/Logo.svg" alt="GoldSim Technology Group" class="logo" /></a>
      </div>
      <!-- /Logo -->
      <div class="title-bar-right search">
        <div class="search form closed">
          <form id="SearchBarSearchForm" action="/Web/Search/">
            <!-- Search Input -->
            <div class="input">
              <input type="search" id="SearchBarSearchQuery" name="SearchText" />
            </div>
            <!-- Search Open / Close Button -->
            <div class="buttons">
              <button type="button" class="icon"></button>
            </div>
          </form>
        </div>
      </div>
    </header>
    <!-- /Site Header Area -->
    <!-- Navigation Menu -->
    @Html.Action("Menu", "Layout")

    <main id="MainContentArea" class="page content" role="main">
      <article itemscope itemtype="http://schema.org/WebPageElement" itemprop="mainContentOfPage" class="grid-container">

        <!-- Long Title (Subtitle) -->
        <header class="grid-x">
          <h1 class="page title long cell">GoldSim Payments</h1>
          <p class="subtitle">Payments Form for GoldSim Invoices</p>
        </header>
        <!-- /Long Title (Subtitle) -->

        <!-- Main Page Content -->
        <div class="grid-container">
          <div class="grid-x grid-margin-x">
            <section class="panel body" style="width: 100%">

              <div class="cell">
                @if (TempData["ConfirmationText"] != null) {
                  <p>@TempData["ConfirmationText"].ToString()</p>
                }
              </div>

              <form action="/Payments/Create" id="PaymentsForm" method="post">

                <!-- Company Name -->
                <div class="cell">
                  <label for="Company" class="required">
                    *Company Name
                    <input id="Company" name="company" type="text" placeholder="Company Name">
                  </label>
                </div>

                <!-- Invoice Number -->
                <div class="medium-6 cell">
                  <label for="Invoice" class="required">
                    *Invoice Number
                    <input id="Invoice" name="invoice" type="text">
                  </label>
                </div>

                <!-- Amount -->
                <div class="medium-6 cell">
                  <label for="Amount" class="required">
                    *Amount
                    <input id="Amount" name="amount" type="tel" min="1" placeholder="1000">
                  </label>
                </div>

                <!-- CC Number -->
                <div class="cell">
                  <label for="CardNumber" class="required">
                    Card Number
                    <div id="CardNumber"></div>
                  </label>
                </div>

                <!-- CVV Code -->
                <div class="medium-3 cell">
                  <label for="Cvv" class="required">*CVV</label>
                  <div id="Cvv"></div>
                </div>

                <!-- Expiration Month -->
                <div class="medium-3 cell">
                  <label for="ExpirationMonth" class="required">*Expiration Month</label>
                  <div id="ExpirationMonth"></div>
                </div>

                <!-- Expiration Year -->
                <div class="medium-3 cell">
                  <label for="ExpirationYear" class="required">*Expiration Year</label>
                  <div id="ExpirationYear"></div>
                </div>

                <!-- Postal Code -->
                <div class="medium-3 cell">
                  <label for="PostalCode" class="required">*ZIP / Postal Code</label>
                  <div id="PostalCode"></div>
                </div>

                <input id="PaymentMethodNonce" name="paymentMethodNonce" type="hidden" />

                <!-- Submit -->
                <div class="cell">
                  <input type="submit" value="Submit Payment" disabled />
                </div>

              </form>

            </section>
          </div>
        </div>
        <!-- /Main Page Content -->

      </article>
    </main>

    <!-- Footer -->
    @Html.Action("Footer", "Layout")

    <!-- jQuery -->
    <script src="/Shared/Scripts/Vendor/jQuery/jquery-3.0.0.min.js"></script>
    <!-- Foundation -->
    <script src="/Shared/Scripts/Vendor/ZURB/foundation.min.js"></script>

    <script>
      /**
       * Initialize Foundation
       */
      $(document).foundation();
    </script>
    <script src="/Shared/Scripts/Scripts.js"></script>

    <script src="https://js.braintreegateway.com/web/3.39.0/js/client.min.js"></script>
    <script src="https://js.braintreegateway.com/web/3.39.0/js/hosted-fields.min.js"></script>

    <script>
      var clientToken           = "@ViewBag.ClientToken";
      var form                  = document.querySelector('#PaymentsForm');
      var submit                = document.querySelector('input[type="submit"]');


      var clientInstance = braintree.client.create({
        authorization: clientToken
      }, function (clientErr, clientInstance) {

        if (clientErr) {
          console.error(clientErr);
          return;
        }

        braintree.hostedFields.create({
          client: clientInstance,
          fields: {
            number: {
              selector          : '#CardNumber',
              placeholder       : '1111 1111 1111 1111'
            },
            cvv: {
              selector          : '#Cvv',
              placeholder       : '123'
            },
            expirationMonth: {
              selector          : '#ExpirationMonth',
              placeholder       : '01'
            },
            expirationYear: {
              selector          : '#ExpirationYear',
              placeholder       : '2021'
            },
            postalCode: {
              selector          : '#PostalCode',
              placeholder       : '12345'
            }
          }
        }, function (hostedFieldsErr, hostedFieldsInstance) {

          if (hostedFieldsErr) {
            console.error(hostedFieldsErr);
            return;
          }

          submit.removeAttribute('disabled');

          form.addEventListener('submit', function (event) {
            event.preventDefault();

            hostedFieldsInstance.tokenize(function (tokenizeErr, payload) {
              if (tokenizeErr) {
                console.error(tokenizeErr);
                return;
              }

              document.querySelector('Nonce').value             = payload.nonce;
              form.submit();
            });
          }, false);

        });
      });

    </script>

  </body>
</html>